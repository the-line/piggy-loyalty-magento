<?php
/**
 * Generic navigation item template
 *
 * @var Leat\LoyaltyFrontend\Block\Loyalty\NavItem $block
 * @var Magento\Framework\Escaper $escaper
 */

$code = $block->getCode();
$position = $block->getPosition();
$isFirst = $position === 1;
$isActive = $block->isActive();

// Default to active if it's the first item or explicitly set as active
$activeClass = ($isFirst || $isActive) ? ' active' : '';

// Get the section ID
$sectionId = $block->getSectionId();

// Get the SVG icon URL
$iconUrl = $block->getIconUrl();
?>
<li class="leat-nav-item" data-code="<?= $escaper->escapeHtmlAttr($code) ?>" data-position="<?= $position ?>">
    <a href="#<?= $escaper->escapeHtmlAttr($sectionId) ?>" class="leat-nav-link<?= $activeClass ?>">
        <?php if ($iconUrl) : ?>
            <img src="<?= $escaper->escapeUrl($iconUrl) ?>" alt="<?= $escaper->escapeHtmlAttr($block->getLabel()) ?>" class="leat-nav-icon" />
        <?php endif; ?>
        <span><?= $escaper->escapeHtml($block->getLabel()) ?></span>
    </a>
</li>
